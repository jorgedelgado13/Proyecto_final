<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Laboratorio – Machine Learning</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-a35d343c8bdbcb87d3b82ed68e48a46c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./LABORATORIO_2.html">Natural Language Processing (NLP)</a></li><li class="breadcrumb-item"><a href="./LABORATORIO_2.html">Laboratorio</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="./index.html" class="sidebar-logo-link">
      </a>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Inicio</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Natural Language Processing (NLP)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./LABORATORIO_2.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Laboratorio</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#importar-librerías" id="toc-importar-librerías" class="nav-link active" data-scroll-target="#importar-librerías">Importar librerías</a></li>
  <li><a href="#cargar-data" id="toc-cargar-data" class="nav-link" data-scroll-target="#cargar-data">Cargar data</a>
  <ul class="collapse">
  <li><a href="#porcentaje-de-missing-values-por-columna" id="toc-porcentaje-de-missing-values-por-columna" class="nav-link" data-scroll-target="#porcentaje-de-missing-values-por-columna">Porcentaje de Missing Values por Columna</a></li>
  </ul></li>
  <li><a href="#llenar-celdas-vacias" id="toc-llenar-celdas-vacias" class="nav-link" data-scroll-target="#llenar-celdas-vacias">Llenar celdas vacias</a>
  <ul class="collapse">
  <li><a href="#función-de-limpieza" id="toc-función-de-limpieza" class="nav-link" data-scroll-target="#función-de-limpieza">Función de limpieza</a></li>
  <li><a href="#fit_transform" id="toc-fit_transform" class="nav-link" data-scroll-target="#fit_transform">Fit_transform</a></li>
  <li><a href="#obtener-las-palabras-finales" id="toc-obtener-las-palabras-finales" class="nav-link" data-scroll-target="#obtener-las-palabras-finales">Obtener las palabras finales</a></li>
  </ul></li>
  <li><a href="#crear-nueva-columna-objetivo" id="toc-crear-nueva-columna-objetivo" class="nav-link" data-scroll-target="#crear-nueva-columna-objetivo">Crear nueva columna objetivo</a></li>
  <li><a href="#cargar-el-dataset" id="toc-cargar-el-dataset" class="nav-link" data-scroll-target="#cargar-el-dataset">Cargar el dataset</a></li>
  <li><a href="#features-y-target" id="toc-features-y-target" class="nav-link" data-scroll-target="#features-y-target">Features y target</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./LABORATORIO_2.html">Natural Language Processing (NLP)</a></li><li class="breadcrumb-item"><a href="./LABORATORIO_2.html">Laboratorio</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Laboratorio</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="importar-librerías" class="level1">
<h1>Importar librerías</h1>
<div id="4449605c" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ====== Importar librerías ======</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> unicodedata</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> altair <span class="im">as</span> alt</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.feature_extraction.text <span class="im">import</span> CountVectorizer, TfidfVectorizer</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># NLTK</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> nltk</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.corpus <span class="im">import</span> stopwords</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Descargas necesarias de NLTK (solo se descargan una vez)</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>nltk.download(<span class="st">"stopwords"</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>stop_es <span class="op">=</span> stopwords.words(<span class="st">"spanish"</span>)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co"># ====== Cargar data ======</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>tweets <span class="op">=</span> pd.read_csv(<span class="st">"data/tweets_totales_con_sentimiento_ml.csv"</span>, encoding<span class="op">=</span><span class="st">"utf-8"</span>)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Muestra básica</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>display(tweets.head())</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>tweets.info()</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"shape:"</span>, tweets.shape)</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tweets.dtypes)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>[nltk_data] Downloading package stopwords to
[nltk_data]     C:\Users\delga\AppData\Roaming\nltk_data...
[nltk_data]   Package stopwords is already up-to-date!</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">tweetId</th>
<th data-quarto-table-cell-role="th">tweetUrl</th>
<th data-quarto-table-cell-role="th">content</th>
<th data-quarto-table-cell-role="th">isReply</th>
<th data-quarto-table-cell-role="th">replyTo</th>
<th data-quarto-table-cell-role="th">createdAt</th>
<th data-quarto-table-cell-role="th">authorId</th>
<th data-quarto-table-cell-role="th">authorName</th>
<th data-quarto-table-cell-role="th">authorUsername</th>
<th data-quarto-table-cell-role="th">authorVerified</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">conversationId</th>
<th data-quarto-table-cell-role="th">inReplyToId</th>
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th">time_response</th>
<th data-quarto-table-cell-role="th">account_age_days</th>
<th data-quarto-table-cell-role="th">mentions_count</th>
<th data-quarto-table-cell-role="th">hashtags_count</th>
<th data-quarto-table-cell-role="th">content_length</th>
<th data-quarto-table-cell-role="th">has_profile_picture</th>
<th data-quarto-table-cell-role="th">sentiment_polarity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>1877190873579950336</td>
<td>https://x.com/hectorjalonm/status/187719087357...</td>
<td>@DiegoPonguill10 @DanielNoboaOk @LuisaGonzalez...</td>
<td>True</td>
<td>DiegoPonguill10</td>
<td>2025-01-09 03:09:00</td>
<td>1458536175119986688</td>
<td>héctor 🌵</td>
<td>hectorjalonm</td>
<td>False</td>
<td>...</td>
<td>1877115691146306005</td>
<td>1877188297551650816</td>
<td>2025-01-08 22:10:30</td>
<td>298.5</td>
<td>1151</td>
<td>3</td>
<td>0</td>
<td>88</td>
<td>True</td>
<td>0.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>1877188297551650816</td>
<td>https://x.com/DiegoPonguill10/status/187718829...</td>
<td>@hectorjalonm @DanielNoboaOk @LuisaGonzalezEc ...</td>
<td>True</td>
<td>hectorjalonm</td>
<td>2025-01-09 02:59:00</td>
<td>1555549203211976704</td>
<td>Diego Ponguillo Vargas TODO TODITO #5 😉 HLVS!!</td>
<td>DiegoPonguill10</td>
<td>False</td>
<td>...</td>
<td>1877115691146306005</td>
<td>1877123519743451648</td>
<td>2025-01-08 22:10:30</td>
<td>288.5</td>
<td>883</td>
<td>3</td>
<td>0</td>
<td>119</td>
<td>True</td>
<td>0.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>1877186248986501120</td>
<td>https://x.com/ekuador_593/status/1877186248986...</td>
<td>@Gregori58965636 @yesendiaz @DanielNoboaOk Otr...</td>
<td>True</td>
<td>Gregori58965636</td>
<td>2025-01-09 02:50:00</td>
<td>1457524470365708288</td>
<td>Sebastián Noboa Ec</td>
<td>ekuador_593</td>
<td>False</td>
<td>...</td>
<td>1877115691146306005</td>
<td>1877122565782576896</td>
<td>2025-01-08 22:10:30</td>
<td>279.5</td>
<td>1153</td>
<td>3</td>
<td>0</td>
<td>60</td>
<td>True</td>
<td>0.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>1877168335193833472</td>
<td>https://x.com/JRamirez2O24/status/187716833519...</td>
<td>@jdiegol2010 @DanielNoboaOk https://t.co/CsLWQ...</td>
<td>True</td>
<td>jdiegol2010</td>
<td>2025-01-09 01:39:00</td>
<td>1759130630766341888</td>
<td>ANDRES RAMIREZ</td>
<td>JRamirez2O24</td>
<td>False</td>
<td>...</td>
<td>1877115691146306005</td>
<td>1877159202646315264</td>
<td>2025-01-08 22:10:30</td>
<td>208.5</td>
<td>321</td>
<td>2</td>
<td>0</td>
<td>51</td>
<td>True</td>
<td>0.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>1877159202646315264</td>
<td>https://x.com/jdiegol2010/status/1877159202646...</td>
<td>@JRamirez2O24 @DanielNoboaOk El tema es respet...</td>
<td>True</td>
<td>JRamirez2O24</td>
<td>2025-01-09 01:03:00</td>
<td>146111157</td>
<td>Juan Diego</td>
<td>jdiegol2010</td>
<td>False</td>
<td>...</td>
<td>1877115691146306005</td>
<td>1877130145938481152</td>
<td>2025-01-08 22:10:30</td>
<td>172.5</td>
<td>5343</td>
<td>2</td>
<td>0</td>
<td>80</td>
<td>True</td>
<td>0.0</td>
</tr>
</tbody>
</table>

<p>5 rows × 26 columns</p>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 158873 entries, 0 to 158872
Data columns (total 26 columns):
 #   Column               Non-Null Count   Dtype  
---  ------               --------------   -----  
 0   tweetId              158873 non-null  int64  
 1   tweetUrl             158873 non-null  object 
 2   content              158873 non-null  object 
 3   isReply              158873 non-null  bool   
 4   replyTo              158011 non-null  object 
 5   createdAt            158873 non-null  object 
 6   authorId             158873 non-null  int64  
 7   authorName           158871 non-null  object 
 8   authorUsername       158873 non-null  object 
 9   authorVerified       158873 non-null  bool   
 10  authorFollowers      158873 non-null  int64  
 11  authorProfilePic     158873 non-null  object 
 12  authorJoinDate       158873 non-null  object 
 13  source               158873 non-null  object 
 14  hashtags             12415 non-null   object 
 15  mentions             158525 non-null  object 
 16  conversationId       158873 non-null  int64  
 17  inReplyToId          158873 non-null  int64  
 18  Date                 158873 non-null  object 
 19  time_response        158873 non-null  float64
 20  account_age_days     158873 non-null  int64  
 21  mentions_count       158873 non-null  int64  
 22  hashtags_count       158873 non-null  int64  
 23  content_length       158873 non-null  int64  
 24  has_profile_picture  158873 non-null  bool   
 25  sentiment_polarity   158873 non-null  float64
dtypes: bool(3), float64(2), int64(9), object(12)
memory usage: 28.3+ MB
shape: (158873, 26)
tweetId                  int64
tweetUrl                object
content                 object
isReply                   bool
replyTo                 object
createdAt               object
authorId                 int64
authorName              object
authorUsername          object
authorVerified            bool
authorFollowers          int64
authorProfilePic        object
authorJoinDate          object
source                  object
hashtags                object
mentions                object
conversationId           int64
inReplyToId              int64
Date                    object
time_response          float64
account_age_days         int64
mentions_count           int64
hashtags_count           int64
content_length           int64
has_profile_picture       bool
sentiment_polarity     float64
dtype: object</code></pre>
</div>
</div>
</section>
<section id="cargar-data" class="level1">
<h1>Cargar data</h1>
<div id="b3c20032" class="cell" data-execution_count="2">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>tweets <span class="op">=</span> pd.read_csv(<span class="st">"data/tweets_totales_con_sentimiento_ml.csv"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Muestra las primeras filas</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tweets.head)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tweets.info)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tweets.shape)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tweets.dtypes)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;bound method NDFrame.head of                     tweetId  \
0       1877190873579950336   
1       1877188297551650816   
2       1877186248986501120   
3       1877168335193833472   
4       1877159202646315264   
...                     ...   
158868  1910030377110077696   
158869  1910028396467478784   
158870  1910026147896631552   
158871  1910026005353533184   
158872  1910025946931027968   

                                                 tweetUrl  \
0       https://x.com/hectorjalonm/status/187719087357...   
1       https://x.com/DiegoPonguill10/status/187718829...   
2       https://x.com/ekuador_593/status/1877186248986...   
3       https://x.com/JRamirez2O24/status/187716833519...   
4       https://x.com/jdiegol2010/status/1877159202646...   
...                                                   ...   
158868  https://x.com/lilibeth7394/status/191003037711...   
158869  https://x.com/_Claudia______/status/1910028396...   
158870  https://x.com/IsaiasRodriguz/status/1910026147...   
158871  https://x.com/controlremoto85/status/191002600...   
158872  https://x.com/allechhh/status/1910025946931027996   

                                                  content  isReply  \
0       @DiegoPonguill10 @DanielNoboaOk @LuisaGonzalez...     True   
1       @hectorjalonm @DanielNoboaOk @LuisaGonzalezEc ...     True   
2       @Gregori58965636 @yesendiaz @DanielNoboaOk Otr...     True   
3       @jdiegol2010 @DanielNoboaOk https://t.co/CsLWQ...     True   
4       @JRamirez2O24 @DanielNoboaOk El tema es respet...     True   
...                                                   ...      ...   
158868  @LuisaGonzalezEc Por más hospitales con medica...     True   
158869  @LuisaGonzalezEc ¡Vamos Con TODO PresidentA \n...     True   
158870  @LuisaGonzalezEc Vamos con todo PRESIDENTA ! 💪...     True   
158871      @LuisaGonzalezEc Luisa presidenta sin dudarlo     True   
158872  @LuisaGonzalezEc Desde México todo mi apoyo a ...     True   

                replyTo            createdAt             authorId  \
0       DiegoPonguill10  2025-01-09 03:09:00  1458536175119986688   
1          hectorjalonm  2025-01-09 02:59:00  1555549203211976704   
2       Gregori58965636  2025-01-09 02:50:00  1457524470365708288   
3           jdiegol2010  2025-01-09 01:39:00  1759130630766341888   
4          JRamirez2O24  2025-01-09 01:03:00            146111157   
...                 ...                  ...                  ...   
158868  LuisaGonzalezEc  2025-04-09 18:01:00            193481457   
158869  LuisaGonzalezEc  2025-04-09 17:53:00  1464620252189401088   
158870  LuisaGonzalezEc  2025-04-09 17:44:00            383933505   
158871  LuisaGonzalezEc  2025-04-09 17:44:00           4846627047   
158872  LuisaGonzalezEc  2025-04-09 17:44:00  1418120966480310272   

                                            authorName   authorUsername  \
0                                             héctor 🌵     hectorjalonm   
1       Diego Ponguillo Vargas TODO TODITO #5 😉 HLVS!!  DiegoPonguill10   
2                                   Sebastián Noboa Ec      ekuador_593   
3                                       ANDRES RAMIREZ     JRamirez2O24   
4                                           Juan Diego      jdiegol2010   
...                                                ...              ...   
158868                                   Od.Lily Silva     lilibeth7394   
158869                                         Claudia   _Claudia______   
158870                             ISAÍAS RODRIGUEZ 🇪🇨   IsaiasRodriguz   
158871                                           Kandy  controlremoto85   
158872                                          Allech         allechhh   

        authorVerified  ...       conversationId          inReplyToId  \
0                False  ...  1877115691146306005  1877188297551650816   
1                False  ...  1877115691146306005  1877123519743451648   
2                False  ...  1877115691146306005  1877122565782576896   
3                False  ...  1877115691146306005  1877159202646315264   
4                False  ...  1877115691146306005  1877130145938481152   
...                ...  ...                  ...                  ...   
158868           False  ...  1910025386240450698  1910025386240450816   
158869           False  ...  1910025386240450698  1910025386240450816   
158870           False  ...  1910025386240450698  1910025386240450816   
158871           False  ...  1910025386240450698  1910025386240450816   
158872           False  ...  1910025386240450698  1910025386240450816   

                       Date time_response account_age_days mentions_count  \
0       2025-01-08 22:10:30    298.500000             1151              3   
1       2025-01-08 22:10:30    288.500000              883              3   
2       2025-01-08 22:10:30    279.500000             1153              3   
3       2025-01-08 22:10:30    208.500000              321              2   
4       2025-01-08 22:10:30    172.500000             5343              2   
...                     ...           ...              ...            ...   
158868  2025-04-09 17:41:53     19.116667             5219              1   
158869  2025-04-09 17:41:53     11.116667             1134              1   
158870  2025-04-09 17:41:53      2.116667             4843              1   
158871  2025-04-09 17:41:53      2.116667             3267              1   
158872  2025-04-09 17:41:53      2.116667             1262              2   

        hashtags_count  content_length has_profile_picture  sentiment_polarity  
0                    0              88                True                0.00  
1                    0             119                True                0.00  
2                    0              60                True                0.00  
3                    0              51                True                0.00  
4                    0              80                True                0.00  
...                ...             ...                 ...                 ...  
158868               0              74                True                0.00  
158869               0             123                True                0.00  
158870               0             174                True                0.75  
158871               0              45                True                0.00  
158872               0             188                True                0.00  

[158873 rows x 26 columns]&gt;
&lt;bound method DataFrame.info of                     tweetId  \
0       1877190873579950336   
1       1877188297551650816   
2       1877186248986501120   
3       1877168335193833472   
4       1877159202646315264   
...                     ...   
158868  1910030377110077696   
158869  1910028396467478784   
158870  1910026147896631552   
158871  1910026005353533184   
158872  1910025946931027968   

                                                 tweetUrl  \
0       https://x.com/hectorjalonm/status/187719087357...   
1       https://x.com/DiegoPonguill10/status/187718829...   
2       https://x.com/ekuador_593/status/1877186248986...   
3       https://x.com/JRamirez2O24/status/187716833519...   
4       https://x.com/jdiegol2010/status/1877159202646...   
...                                                   ...   
158868  https://x.com/lilibeth7394/status/191003037711...   
158869  https://x.com/_Claudia______/status/1910028396...   
158870  https://x.com/IsaiasRodriguz/status/1910026147...   
158871  https://x.com/controlremoto85/status/191002600...   
158872  https://x.com/allechhh/status/1910025946931027996   

                                                  content  isReply  \
0       @DiegoPonguill10 @DanielNoboaOk @LuisaGonzalez...     True   
1       @hectorjalonm @DanielNoboaOk @LuisaGonzalezEc ...     True   
2       @Gregori58965636 @yesendiaz @DanielNoboaOk Otr...     True   
3       @jdiegol2010 @DanielNoboaOk https://t.co/CsLWQ...     True   
4       @JRamirez2O24 @DanielNoboaOk El tema es respet...     True   
...                                                   ...      ...   
158868  @LuisaGonzalezEc Por más hospitales con medica...     True   
158869  @LuisaGonzalezEc ¡Vamos Con TODO PresidentA \n...     True   
158870  @LuisaGonzalezEc Vamos con todo PRESIDENTA ! 💪...     True   
158871      @LuisaGonzalezEc Luisa presidenta sin dudarlo     True   
158872  @LuisaGonzalezEc Desde México todo mi apoyo a ...     True   

                replyTo            createdAt             authorId  \
0       DiegoPonguill10  2025-01-09 03:09:00  1458536175119986688   
1          hectorjalonm  2025-01-09 02:59:00  1555549203211976704   
2       Gregori58965636  2025-01-09 02:50:00  1457524470365708288   
3           jdiegol2010  2025-01-09 01:39:00  1759130630766341888   
4          JRamirez2O24  2025-01-09 01:03:00            146111157   
...                 ...                  ...                  ...   
158868  LuisaGonzalezEc  2025-04-09 18:01:00            193481457   
158869  LuisaGonzalezEc  2025-04-09 17:53:00  1464620252189401088   
158870  LuisaGonzalezEc  2025-04-09 17:44:00            383933505   
158871  LuisaGonzalezEc  2025-04-09 17:44:00           4846627047   
158872  LuisaGonzalezEc  2025-04-09 17:44:00  1418120966480310272   

                                            authorName   authorUsername  \
0                                             héctor 🌵     hectorjalonm   
1       Diego Ponguillo Vargas TODO TODITO #5 😉 HLVS!!  DiegoPonguill10   
2                                   Sebastián Noboa Ec      ekuador_593   
3                                       ANDRES RAMIREZ     JRamirez2O24   
4                                           Juan Diego      jdiegol2010   
...                                                ...              ...   
158868                                   Od.Lily Silva     lilibeth7394   
158869                                         Claudia   _Claudia______   
158870                             ISAÍAS RODRIGUEZ 🇪🇨   IsaiasRodriguz   
158871                                           Kandy  controlremoto85   
158872                                          Allech         allechhh   

        authorVerified  ...       conversationId          inReplyToId  \
0                False  ...  1877115691146306005  1877188297551650816   
1                False  ...  1877115691146306005  1877123519743451648   
2                False  ...  1877115691146306005  1877122565782576896   
3                False  ...  1877115691146306005  1877159202646315264   
4                False  ...  1877115691146306005  1877130145938481152   
...                ...  ...                  ...                  ...   
158868           False  ...  1910025386240450698  1910025386240450816   
158869           False  ...  1910025386240450698  1910025386240450816   
158870           False  ...  1910025386240450698  1910025386240450816   
158871           False  ...  1910025386240450698  1910025386240450816   
158872           False  ...  1910025386240450698  1910025386240450816   

                       Date time_response account_age_days mentions_count  \
0       2025-01-08 22:10:30    298.500000             1151              3   
1       2025-01-08 22:10:30    288.500000              883              3   
2       2025-01-08 22:10:30    279.500000             1153              3   
3       2025-01-08 22:10:30    208.500000              321              2   
4       2025-01-08 22:10:30    172.500000             5343              2   
...                     ...           ...              ...            ...   
158868  2025-04-09 17:41:53     19.116667             5219              1   
158869  2025-04-09 17:41:53     11.116667             1134              1   
158870  2025-04-09 17:41:53      2.116667             4843              1   
158871  2025-04-09 17:41:53      2.116667             3267              1   
158872  2025-04-09 17:41:53      2.116667             1262              2   

        hashtags_count  content_length has_profile_picture  sentiment_polarity  
0                    0              88                True                0.00  
1                    0             119                True                0.00  
2                    0              60                True                0.00  
3                    0              51                True                0.00  
4                    0              80                True                0.00  
...                ...             ...                 ...                 ...  
158868               0              74                True                0.00  
158869               0             123                True                0.00  
158870               0             174                True                0.75  
158871               0              45                True                0.00  
158872               0             188                True                0.00  

[158873 rows x 26 columns]&gt;
(158873, 26)
tweetId                  int64
tweetUrl                object
content                 object
isReply                   bool
replyTo                 object
createdAt               object
authorId                 int64
authorName              object
authorUsername          object
authorVerified            bool
authorFollowers          int64
authorProfilePic        object
authorJoinDate          object
source                  object
hashtags                object
mentions                object
conversationId           int64
inReplyToId              int64
Date                    object
time_response          float64
account_age_days         int64
mentions_count           int64
hashtags_count           int64
content_length           int64
has_profile_picture       bool
sentiment_polarity     float64
dtype: object</code></pre>
</div>
</div>
<p>Entender la estructura del dataset nos da una mejor idea de con que estamos lidiando</p>
<section id="porcentaje-de-missing-values-por-columna" class="level3">
<h3 class="anchored" data-anchor-id="porcentaje-de-missing-values-por-columna">Porcentaje de Missing Values por Columna</h3>
<div id="0041319b" class="cell" data-execution_count="3">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ====== Porcentaje de Missing Values por Columna ======</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>nan_percent <span class="op">=</span> tweets.isna().mean() <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>nan_percent_sorted <span class="op">=</span> nan_percent.sort_values(ascending<span class="op">=</span><span class="va">False</span>).<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>nan_percent_sorted</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>hashtags               92.19
replyTo                 0.54
mentions                0.22
authorName              0.00
tweetUrl                0.00
tweetId                 0.00
createdAt               0.00
authorId                0.00
isReply                 0.00
content                 0.00
authorVerified          0.00
authorUsername          0.00
authorFollowers         0.00
authorProfilePic        0.00
source                  0.00
authorJoinDate          0.00
conversationId          0.00
inReplyToId             0.00
Date                    0.00
time_response           0.00
account_age_days        0.00
mentions_count          0.00
hashtags_count          0.00
content_length          0.00
has_profile_picture     0.00
sentiment_polarity      0.00
dtype: float64</code></pre>
</div>
</div>
</section>
</section>
<section id="llenar-celdas-vacias" class="level1">
<h1>Llenar celdas vacias</h1>
<div id="8eaec550" class="cell" data-execution_count="4">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>texts_raw <span class="op">=</span> tweets[<span class="st">"content"</span>].fillna(<span class="st">""</span>).astype(<span class="bu">str</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<section id="función-de-limpieza" class="level2">
<h2 class="anchored" data-anchor-id="función-de-limpieza">Función de limpieza</h2>
<div id="76e349c9" class="cell" data-execution_count="5">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ====== Función de limpieza (conserva 'ñ', quita tildes) ======</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># En lugar de NFD (que rompería la ñ), mapeamos tildes explícitamente.</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>_TILDE_MAP <span class="op">=</span> <span class="bu">str</span>.maketrans({</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"á"</span>: <span class="st">"a"</span>, <span class="st">"é"</span>: <span class="st">"e"</span>, <span class="st">"í"</span>: <span class="st">"i"</span>, <span class="st">"ó"</span>: <span class="st">"o"</span>, <span class="st">"ú"</span>: <span class="st">"u"</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Á"</span>: <span class="st">"a"</span>, <span class="st">"É"</span>: <span class="st">"e"</span>, <span class="st">"Í"</span>: <span class="st">"i"</span>, <span class="st">"Ó"</span>: <span class="st">"o"</span>, <span class="st">"Ú"</span>: <span class="st">"u"</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ü"</span>: <span class="st">"u"</span>, <span class="st">"Ü"</span>: <span class="st">"u"</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> normalize_text(text: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> <span class="bu">str</span>(text).lower().strip()</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># URLs</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> re.sub(<span class="vs">r"https</span><span class="op">?</span><span class="vs">://</span><span class="dv">\S</span><span class="op">+</span><span class="cf">|</span><span class="vs">www</span><span class="ch">\.</span><span class="dv">\S</span><span class="op">+</span><span class="vs">"</span>, <span class="st">" "</span>, text)</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># menciones</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> re.sub(<span class="vs">r"@</span><span class="dv">\w</span><span class="op">+</span><span class="vs">"</span>, <span class="st">" "</span>, text)</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># hashtags (si no te sirven)</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> re.sub(<span class="vs">r"#</span><span class="dv">\w</span><span class="op">+</span><span class="vs">"</span>, <span class="st">" "</span>, text)</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># quitar tildes pero NO tocar 'ñ'</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> text.translate(_TILDE_MAP)</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># conservar letras (a-z, ñ) y espacios</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> re.sub(<span class="vs">r"</span><span class="pp">[^a-zñ</span><span class="dv">\s</span><span class="pp">]</span><span class="vs">"</span>, <span class="st">" "</span>, text)</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># colapsar espacios</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> re.sub(<span class="vs">r"</span><span class="dv">\s</span><span class="op">+</span><span class="vs">"</span>, <span class="st">" "</span>, text).strip()</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> text</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>tweets[<span class="st">"clean_text"</span>] <span class="op">=</span> texts_raw.<span class="bu">apply</span>(normalize_text)</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>tweets[[<span class="st">"content"</span>, <span class="st">"clean_text"</span>]].head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">content</th>
<th data-quarto-table-cell-role="th">clean_text</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>@DiegoPonguill10 @DanielNoboaOk @LuisaGonzalez...</td>
<td>jajajaajajajajajajajajjajaajja okkkkkkk</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>@hectorjalonm @DanielNoboaOk @LuisaGonzalezEc ...</td>
<td>ahora vivimos en la miseria antes fuimos el me...</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>@Gregori58965636 @yesendiaz @DanielNoboaOk Otr...</td>
<td>otro troll basura</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>@jdiegol2010 @DanielNoboaOk https://t.co/CsLWQ...</td>
<td></td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>@JRamirez2O24 @DanielNoboaOk El tema es respet...</td>
<td>el tema es respetar a quien eligio el pueblo o no</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="fit_transform" class="level2">
<h2 class="anchored" data-anchor-id="fit_transform">Fit_transform</h2>
<p>Aprende de los tweets (vocabulario) y del ser caso elimina las stop-words</p>
<div id="7e6417a3" class="cell" data-execution_count="6">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>stop_es <span class="op">=</span> stopwords.words(<span class="st">"spanish"</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>vectorizer <span class="op">=</span> TfidfVectorizer(stop_words<span class="op">=</span>stop_es)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">#vectorizer = CountVectorizer(stop_words=stop_es) </span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="2d1b8d61" class="cell" data-execution_count="7">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> vectorizer.fit_transform(tweets[<span class="st">"clean_text"</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="obtener-las-palabras-finales" class="level2">
<h2 class="anchored" data-anchor-id="obtener-las-palabras-finales">Obtener las palabras finales</h2>
<div id="8c582592" class="cell" data-execution_count="8">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Matriz X:"</span>, X.shape)      <span class="co"># (n_docs, n_terms)</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>vocab <span class="op">=</span> vectorizer.get_feature_names_out()</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Primeras 20 palabras:"</span>, vocab[:<span class="dv">20</span>])</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>sample_rows <span class="op">=</span> <span class="bu">min</span>(<span class="dv">10</span>, X.shape[<span class="dv">0</span>])</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>preview_df <span class="op">=</span> pd.DataFrame(</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    X[:sample_rows].toarray(),</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    columns<span class="op">=</span>vocab</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>preview_df.iloc[:, :<span class="dv">20</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Matriz X: (158873, 57859)
Primeras 20 palabras: ['aa' 'aaa' 'aaaa' 'aaaaa' 'aaaaaa' 'aaaaaaa' 'aaaaaaaa' 'aaaaaaaaaaaaa'
 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa'
 'aaaaaaasco' 'aaaaaahhhh' 'aaaaaanndaaaaaaa' 'aaaaaauuuuuchhhh' 'aaaaah'
 'aaaaajajajajaajajajajajajajajaajajajajajajaajajajajajajajaajajajajajajaajajajajajajaja'
 'aaaah' 'aaaahh' 'aaaahhhajajajajajajajajajajaj' 'aaaahhhh' 'aaaajjjaaa']</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">aa</th>
<th data-quarto-table-cell-role="th">aaa</th>
<th data-quarto-table-cell-role="th">aaaa</th>
<th data-quarto-table-cell-role="th">aaaaa</th>
<th data-quarto-table-cell-role="th">aaaaaa</th>
<th data-quarto-table-cell-role="th">aaaaaaa</th>
<th data-quarto-table-cell-role="th">aaaaaaaa</th>
<th data-quarto-table-cell-role="th">aaaaaaaaaaaaa</th>
<th data-quarto-table-cell-role="th">aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</th>
<th data-quarto-table-cell-role="th">aaaaaaasco</th>
<th data-quarto-table-cell-role="th">aaaaaahhhh</th>
<th data-quarto-table-cell-role="th">aaaaaanndaaaaaaa</th>
<th data-quarto-table-cell-role="th">aaaaaauuuuuchhhh</th>
<th data-quarto-table-cell-role="th">aaaaah</th>
<th data-quarto-table-cell-role="th">aaaaajajajajaajajajajajajajajaajajajajajajaajajajajajajajaajajajajajajaajajajajajajaja</th>
<th data-quarto-table-cell-role="th">aaaah</th>
<th data-quarto-table-cell-role="th">aaaahh</th>
<th data-quarto-table-cell-role="th">aaaahhhajajajajajajajajajajaj</th>
<th data-quarto-table-cell-role="th">aaaahhhh</th>
<th data-quarto-table-cell-role="th">aaaajjjaaa</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">5</th>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">6</th>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">7</th>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">8</th>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">9</th>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
<section id="crear-nueva-columna-objetivo" class="level1">
<h1>Crear nueva columna objetivo</h1>
<div id="77cf1a59" class="cell" data-execution_count="9">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>tweets[<span class="st">"asco"</span>] <span class="op">=</span> preview_df[<span class="st">"asco"</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="cargar-el-dataset" class="level1">
<h1>Cargar el dataset</h1>
<div id="460fc37d" class="cell" data-execution_count="10">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#revisar = ['isReply','has_profile_picture','authorVerified']</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">#newsgroups = fetch_20newsgroups(subset='train', remove=('headers','footers','quotes'))</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co">#print(newsgroups.target_names)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="features-y-target" class="level1">
<h1>Features y target</h1>
<div id="0ee700ac" class="cell" data-execution_count="11">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#X_text = newsgroups.data #features</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co">#y = newsgroups.target #target</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>```</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>